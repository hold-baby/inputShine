{"version":3,"sources":["inputShine.js"],"names":["global","factory","exports","module","define","amd","inputShine","this","Particle","id","group","position","velocity","size","life","behavior","_id","_group","_position","Vector","_velocity","_size","_life","Math","round","_behavior","Vector$1","x","y","_x","_y","MAX_LIFE","rgb","prototype","update","stage","i","l","length","call","toString","create","add","a","b","subtract","random","range","v","randomize","distanceSquared","dx","dy","distance","sqrt","value","magnitudeSquared","magnitude","angle","atan2","PI","clone","multiply","divide","normalize","limit","treshold","amount","rotate","degrees","PI_HALF","PI_180","cos","sin","flip","temp","invert","d","white","black","red","orange","yellow","green","young","blue","purple","inpStyle","styles","document","getElementsByTagName","createElement","innerHTML","head","appendChild","Random","between","min","max","inpKeyUp","el","opt","textColor","borderColor","classId","floor","classContent","classList","simulate","input","caret","field","canvas","context","particles","destroyed","_this","keyUpClass","fitCanvas","width","window","innerWidth","height","innerHeight","setup","body","addEventListener","destroy","particle","push","getContext","clear","clearRect","spray","config","apply","debug","paint","circle","beginPath","moveTo","lineTo","strokeStyle","stroke","closePath","color","arc","fillStyle","fill","square","rect","cohesion","speed","pow","center","count","separation","diff","heading","alignment","move","eat","food","prey","indexOf","neighbour","force","attract","forceMultiplier","groups","attractor","totalForce","grouping","wrap","margin","radius","reflect","edge","action","Object","defineProperties","get","init","tick","p","pop","splice","beforePaint","paints","afterPaint","act","requestAnimationFrame","e","pageX","pageY","go","forEach","s","o","shine","textContent","intensity","progress","offsetWidth","offset","left","rangeMin","rangeMax","right","top","bottom","setTimeout","remove","readyState","getElementById","setAttribute","reposition","getBoundingClientRect","style","cssText","defaultView","getComputedStyle","visibility","onload","onresize","onfocus","onblur"],"mappings":"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","file":"inputShine.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.inputShine = factory());\n}(this, (function () { 'use strict';\n\n/**\r\n * Particle Class\r\n */\nfunction Particle(id, group, position, velocity, size, life, behavior) {\n\n\tthis._id = id || 'default';\n\tthis._group = group || 'default';\n\n\tthis._position = position || new Vector();\n\tthis._velocity = velocity || new Vector();\n\tthis._size = size || 1;\n\tthis._life = Math.round(life || 0);\n\n\tthis._behavior = behavior || [];\n}\n\nParticle.prototype = {\n\tget id() {\n\t\treturn this._id;\n\t},\n\tget group() {\n\t\treturn this._group;\n\t},\n\tget life() {\n\t\treturn this._life;\n\t},\n\tget size() {\n\t\treturn this._size;\n\t},\n\tset size(size) {\n\t\tthis._size = size;\n\t},\n\tget position() {\n\t\treturn this._position;\n\t},\n\tget velocity() {\n\t\treturn this._velocity;\n\t},\n\tupdate: function (stage) {\n\n\t\tthis._life++;\n\n\t\tvar i = 0;\n\t\tvar l = this._behavior.length;\n\n\t\tfor (; i < l; i++) {\n\t\t\tthis._behavior[i].call(stage, this);\n\t\t}\n\t},\n\ttoString: function () {\n\t\treturn 'Particle(' + this._id + ') ' + this._life + ' pos: ' + this._position + ' vec: ' + this._velocity;\n\t}\n};\n\n/**\r\n * 2D Vector Class\r\n */\nfunction Vector$1(x, y) {\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n}\n\nVector$1.create = function (x, y) {\n\treturn new Vector$1(x, y);\n};\n\nVector$1.add = function (a, b) {\n\treturn new Vector$1(a.x + b.x, a.y + b.y);\n};\n\nVector$1.subtract = function (a, b) {\n\treturn new Vector$1(a.x - b.x, a.y - b.y);\n};\n\nVector$1.random = function (range) {\n\tvar v = new Vector$1();\n\tv.randomize(range);\n\treturn v;\n};\n\nVector$1.distanceSquared = function (a, b) {\n\tvar dx = a.x - b.x;\n\tvar dy = a.y - b.y;\n\treturn dx * dx + dy * dy;\n};\n\nVector$1.distance = function (a, b) {\n\tvar dx = a.x - b.x;\n\tvar dy = a.y - b.y;\n\treturn Math.sqrt(dx * dx + dy * dy);\n};\n\nVector$1.prototype = {\n\tget x() {\n\t\treturn this._x;\n\t},\n\tget y() {\n\t\treturn this._y;\n\t},\n\tset x(value) {\n\t\tthis._x = value;\n\t},\n\tset y(value) {\n\t\tthis._y = value;\n\t},\n\tget magnitudeSquared() {\n\t\treturn this._x * this._x + this._y * this._y;\n\t},\n\tget magnitude() {\n\t\treturn Math.sqrt(this.magnitudeSquared);\n\t},\n\tget angle() {\n\t\treturn Math.atan2(this._y, this._x) * 180 / Math.PI;\n\t},\n\tclone: function () {\n\t\treturn new Vector$1(this._x, this._y);\n\t},\n\tadd: function (v) {\n\t\tthis._x += v.x;\n\t\tthis._y += v.y;\n\t},\n\tsubtract: function (v) {\n\t\tthis._x -= v.x;\n\t\tthis._y -= v.y;\n\t},\n\tmultiply: function (value) {\n\t\tthis._x *= value;\n\t\tthis._y *= value;\n\t},\n\tdivide: function (value) {\n\t\tthis._x /= value;\n\t\tthis._y /= value;\n\t},\n\tnormalize: function () {\n\t\tvar magnitude = this.magnitude;\n\t\tif (magnitude > 0) {\n\t\t\tthis.divide(magnitude);\n\t\t}\n\t},\n\tlimit: function (treshold) {\n\t\tif (this.magnitude > treshold) {\n\t\t\tthis.normalize();\n\t\t\tthis.multiply(treshold);\n\t\t}\n\t},\n\trandomize: function (amount) {\n\t\tamount = amount || 1;\n\t\tthis._x = amount * 2 * (-.5 + Math.random());\n\t\tthis._y = amount * 2 * (-.5 + Math.random());\n\t},\n\trotate: function (degrees) {\n\t\tvar magnitude = this.magnitude;\n\t\tvar angle = (Math.atan2(this._x, this._y) * PI_HALF + degrees) * PI_180;\n\t\tthis._x = magnitude * Math.cos(angle);\n\t\tthis._y = magnitude * Math.sin(angle);\n\t},\n\tflip: function () {\n\t\tvar temp = this._y;\n\t\tthis._y = this._x;\n\t\tthis._x = temp;\n\t},\n\tinvert: function () {\n\t\tthis._x = -this._x;\n\t\tthis._y = -this._y;\n\t},\n\ttoString: function () {\n\t\treturn this._x + ', ' + this._y;\n\t}\n};\n\nvar PI_2, PI_180$1, MAX_LIFE, rgb, cssFile;\n\nPI_2 = Math.PI / 2;\nPI_180$1 = Math.PI / 180;\nMAX_LIFE = 50;\n\n/**\r\n * 光点色值配置\r\n */\nrgb = {\n\td: \"255,255,255\", // 光点内部白色色值\n\twhite: \"231,244,255\",\n\tblack: \"0,0,0\",\n\tred: \"247,32,16\",\n\torange: \"255,152,0\",\n\tyellow: \"255,244,0\",\n\tgreen: \"173,255,47\",\n\tyoung: \"0,128,0\",\n\tblue: \"27,84,208\",\n\tpurple: \"231,100,255\"\n\n\t/**\r\n  * css样式内容\r\n  */\n};cssFile = \"input[shine=shine]:focus{outline:0}canvas{position:absolute;left:0;right:0;top:0;bottom:0;pointer-events:none}::-webkit-input-placeholder{text-shadow:0 0 .125em transparent;-webkit-transition:all .25s;transition:all .25s}input[shine=shine]:focus::-webkit-input-placeholder{opacity:.5}::-moz-placeholder{text-shadow:0 0 .125em transparent;-webkit-transition:all .25s;transition:all .25s}input[shine=shine]:focus::-moz-placeholder{opacity:.5}:-ms-input-placeholder{text-shadow:0 0 .125em transparent;-webkit-transition:all .25s;transition:all .25s}input[shine=shine]:focus:-ms-input-placeholder{opacity:.5}\";\n\nvar styles = document.getElementsByTagName(\"style\");\nvar inpStyle;\nfor (var i = 0; i < styles.length; i++) {\n\tif (styles[i].id == \"inpShineStyle\") {\n\t\tinpStyle = styles[i];\n\t\tbreak;\n\t}\n}\nif (typeof inpStyle == \"undefined\") {\n\tinpStyle = document.createElement(\"style\");\n\tinpStyle.id = \"inpShineStyle\";\n\tinpStyle.innerHTML = cssFile;\n\tdocument.head.appendChild(inpStyle);\n}\n\n/**\r\n * Random\r\n */\nvar Random = {\n\tbetween: function (min, max) {\n\t\treturn min + Math.random() * (max - min);\n\t}\n\n\t/**\r\n  * 创建input.keyup\r\n  */\n};var inpKeyUp = function (el, opt) {\n\tvar textColor = \"rgb(\" + (opt.textColor ? rgb[opt.textColor] : rgb.white) + \")\";\n\tvar borderColor = \"rgb(\" + (opt.borderColor ? rgb[opt.borderColor] : rgb.white) + \")\";\n\tvar classId = \"_Shine\" + Math.floor(Math.random() * 100000000);\n\tvar classContent = \"input[shine=shine].keyup\" + classId + \" {\" + \"color:\" + textColor + \";\" + \"text-shadow: 0 0 .125em \" + textColor + \";\" + \"border-color:\" + borderColor + \";\" + \"box-shadow: 0 0 .25em white,inset 0 0 .25em \" + borderColor + \";\" + \"}\";\n\tinpStyle.innerHTML = inpStyle.innerHTML + classContent;\n\tel.classList.add(classId);\n\treturn classId;\n};\n\n// 创建dom\nfunction simulate(input, caret, field, opt) {\n\t// 变量声明\n\tvar particles = [];\n\tvar destroyed = [];\n\tvar canvas;\n\tvar context;\n\tvar _this = this;\n\n\tvar keyUpClass = inpKeyUp(input, opt);\n\n\tthis.init = function () {}, this.tick = function (particles) {\n\n\t\tif (!particles) {\n\t\t\treturn;\n\t\t}\n\n\t\tparticles.forEach(function (p) {\n\n\t\t\tif (p.life > MAX_LIFE) {\n\t\t\t\t_this.destroy(p);\n\t\t\t}\n\t\t});\n\t}, this.beforePaint = function () {\n\t\t_this.clear();\n\t}, this.paints = function (particle) {\n\n\t\tvar p = particle.position;\n\t\tvar s = particle.size;\n\t\tvar o = 1 - particle.life / MAX_LIFE;\n\n\t\t// 光点内部颜色\n\t\tthis.paint.circle(p.x, p.y, s, 'rgba(' + rgb.d + ',' + o + ')');\n\t\t// 光点外层颜色\n\t\tthis.paint.circle(p.x, p.y, s + 2, 'rgba(' + (opt.shine && rgb[opt.shine] ? rgb[opt.shine] : rgb.white) + ',' + o * .25 + ')');\n\t}, this.afterPaint = function () {\n\t\t// nothing\n\t}, this.action = function (x, y) {\n\n\t\tcaret.textContent = input.value;\n\n\t\tburst.call(this, 10);\n\n\t\tinput.classList.add('keyup' + keyUpClass);\n\t\tsetTimeout(function () {\n\t\t\tinput.classList.remove('keyup' + keyUpClass);\n\t\t}, 100);\n\t};\n\n\tif (document.readyState === 'interactive') {\n\t\tsetup();\n\t} else {\n\t\tdocument.addEventListener('DOMContentLoaded', setup);\n\t}\n\n\tfunction burst(intensity) {\n\n\t\tvar behavior = [this.behavior.cohesion(), this.behavior.move()];\n\n\t\tvar size = .75;\n\t\tvar force = .7;\n\t\tvar lifeMin = 0;\n\t\tvar progress = Math.min(field.width, caret.offsetWidth) / field.width;\n\t\tvar offset = field.left + field.width * progress;\n\t\tvar rangeMin = Math.max(field.left, offset - 30);\n\t\tvar rangeMax = Math.min(field.right, offset + 10);\n\n\t\tthis.spray(intensity, function () {\n\t\t\treturn [null, null, Vector$1.create(Random.between(rangeMin + 10, rangeMax - 20), Random.between(field.top + 15, field.bottom - 15)), Vector$1.random(force), size + Math.random(), Random.between(lifeMin, 0), behavior];\n\t\t});\n\n\t\t// top edge\n\t\tthis.spray(intensity * .5, function () {\n\t\t\treturn [null, null, Vector$1.create(Random.between(rangeMin, rangeMax), field.top), Vector$1.random(force), size + Math.random(), Random.between(lifeMin, 0), behavior];\n\t\t});\n\n\t\t// bottom edge\n\t\tthis.spray(intensity * .5, function () {\n\t\t\treturn [null, null, Vector$1.create(Random.between(rangeMin, rangeMax), field.top + field.height), Vector$1.random(force), size + Math.random(), Random.between(lifeMin, 0), behavior];\n\t\t});\n\n\t\t// left edge\n\t\tif (input.value.length === 1) {\n\n\t\t\tthis.spray(intensity * 2, function () {\n\t\t\t\treturn [null, null, Vector$1.create(field.left, Random.between(field.top, field.bottom)), Vector$1.random(force), size + Math.random(), Random.between(lifeMin, 0), behavior];\n\t\t\t});\n\t\t}\n\n\t\t// right edge\n\t\tif (rangeMax == field.right) {\n\n\t\t\tthis.spray(intensity * 2, function () {\n\t\t\t\treturn [null, null, Vector$1.create(field.right, Random.between(field.top, field.bottom)), Vector$1.random(force), size + Math.random(), Random.between(lifeMin, 0), behavior];\n\t\t\t});\n\t\t}\n\t}\n\n\t// 重置画布大小\n\tfunction fitCanvas() {\n\t\tcanvas.width = window.innerWidth;\n\t\tcanvas.height = window.innerHeight;\n\t}\n\n\t// 创建画布及监听\n\tfunction setup() {\n\n\t\t// 创建画布\n\t\tcanvas = document.createElement('canvas');\n\t\tdocument.body.appendChild(canvas);\n\n\t\t// 监听窗口大小 重置画布大小\n\t\twindow.addEventListener('resize', fitCanvas);\n\n\t\t// 开始\n\t\tgo();\n\t}\n\n\tfunction go() {\n\n\t\t// 设置初始化画布大小\n\t\tfitCanvas();\n\n\t\t// 获取画布上下文\n\t\tcontext = canvas.getContext('2d');\n\n\t\t// simulation update loop\n\t\tfunction act() {\n\n\t\t\t// update particle states\n\t\t\tvar i = 0;\n\t\t\tvar l = particles.length;\n\t\t\tvar p;\n\t\t\tfor (; i < l; i++) {\n\t\t\t\tparticles[i].update(_this);\n\t\t\t}\n\n\t\t\t// clean destroyed particles\n\t\t\twhile (p = destroyed.pop()) {\n\n\t\t\t\tdo {\n\n\t\t\t\t\t// has not been found in destroyed array?\n\t\t\t\t\tif (p !== particles[i]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// remove particle\n\t\t\t\t\tparticles.splice(i, 1);\n\t\t\t\t} while (i-- >= 0);\n\t\t\t}\n\n\t\t\t// repaint context\n\t\t\t_this.beforePaint.call(_this);\n\n\t\t\t// repaint particles\n\t\t\ti = 0;\n\t\t\tl = particles.length;\n\t\t\tfor (; i < l; i++) {\n\t\t\t\t_this.paints.call(_this, particles[i]);\n\t\t\t}\n\n\t\t\t// after particles have been painted\n\t\t\t_this.afterPaint.call(_this);\n\t\t}\n\n\t\tfunction tick() {\n\n\t\t\t// call update method, this allows for inserting particles later on\n\t\t\t_this.tick.call(_this, particles);\n\n\t\t\t// update particles here\n\t\t\tact();\n\n\t\t\t// on to the next frame\n\t\t\twindow.requestAnimationFrame(tick);\n\t\t}\n\n\t\t/**\r\n   * API\r\n   **/\n\t\tfunction clear() {\n\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\t\t}\n\n\t\tfunction destroy(particle) {\n\t\t\tdestroyed.push(particle);\n\t\t}\n\n\t\tfunction add(id, group, position, velocity, size, life, behavior) {\n\t\t\tparticles.push(new Particle(id, group, position, velocity, size, life, behavior));\n\t\t}\n\n\t\tfunction spray(amount, config) {\n\t\t\tvar i = 0;\n\t\t\tfor (; i < amount; i++) {\n\t\t\t\tadd.apply(_this, config());\n\t\t\t}\n\t\t}\n\n\t\tfunction debug(particle) {\n\t\t\t_this.paint.circle(particle.position.x, particle.position.y, particle.size, 'rgba(255,0,0,.75)');\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(particle.position.x, particle.position.y);\n\t\t\tcontext.lineTo(particle.position.x + particle.velocity.x * 10, particle.position.y + particle.velocity.y * 10);\n\t\t\tcontext.strokeStyle = 'rgba(255,0,0,.1)';\n\t\t\tcontext.stroke();\n\t\t\tcontext.closePath();\n\t\t}\n\t\t_this.clear = clear;\n\t\t_this.destroy = destroy;\n\t\t_this.add = add;\n\t\t_this.spray = spray;\n\t\t_this.debug = debug;\n\n\t\t_this.paint = {\n\t\t\tcircle: function (x, y, size, color) {\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.arc(x, y, size, 0, 2 * Math.PI, false);\n\t\t\t\tcontext.fillStyle = color;\n\t\t\t\tcontext.fill();\n\t\t\t},\n\t\t\tsquare: function (x, y, size, color) {\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.rect(x - size * .5, y - size * .5, size, size);\n\t\t\t\tcontext.fillStyle = color;\n\t\t\t\tcontext.fill();\n\t\t\t}\n\t\t};\n\n\t\t_this.behavior = {\n\t\t\tcohesion: function (range, speed) {\n\t\t\t\trange = Math.pow(range || 100, 2);\n\t\t\t\tspeed = speed || .001;\n\t\t\t\treturn function (particle) {\n\n\t\t\t\t\tvar center = new Vector$1();\n\t\t\t\t\tvar i = 0;\n\t\t\t\t\tvar l = particles.length;\n\t\t\t\t\tvar count = 0;\n\n\t\t\t\t\tif (l <= 1) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (; i < l; i++) {\n\n\t\t\t\t\t\t// don't use self in group\n\t\t\t\t\t\tif (particles[i] === particle || Vector$1.distanceSquared(particles[i].position, particle.position) > range) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcenter.add(Vector$1.subtract(particles[i].position, particle.position));\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (count > 0) {\n\n\t\t\t\t\t\tcenter.divide(count);\n\n\t\t\t\t\t\tcenter.normalize();\n\t\t\t\t\t\tcenter.multiply(particle.velocity.magnitude);\n\n\t\t\t\t\t\tcenter.multiply(.05);\n\t\t\t\t\t}\n\n\t\t\t\t\tparticle.velocity.add(center);\n\t\t\t\t};\n\t\t\t},\n\t\t\tseparation: function (distance) {\n\n\t\t\t\tvar distance = Math.pow(distance || 25, 2);\n\n\t\t\t\treturn function (particle) {\n\n\t\t\t\t\tvar heading = new Vector$1();\n\t\t\t\t\tvar i = 0;\n\t\t\t\t\tvar l = particles.length;\n\t\t\t\t\tvar count = 0;\n\t\t\t\t\tvar diff;\n\n\t\t\t\t\tif (l <= 1) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (; i < l; i++) {\n\n\t\t\t\t\t\t// don't use self in group\n\t\t\t\t\t\tif (particles[i] === particle || Vector$1.distanceSquared(particles[i].position, particle.position) > distance) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// stay away from neighbours\n\t\t\t\t\t\tdiff = Vector$1.subtract(particle.position, particles[i].position);\n\t\t\t\t\t\tdiff.normalize();\n\n\t\t\t\t\t\theading.add(diff);\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (count > 0) {\n\n\t\t\t\t\t\t// get average\n\t\t\t\t\t\theading.divide(count);\n\n\t\t\t\t\t\t// make same length as current velocity (so particle won't speed up)\n\t\t\t\t\t\theading.normalize();\n\t\t\t\t\t\theading.multiply(particle.velocity.magnitude);\n\n\t\t\t\t\t\t// limit force to make particle movement smoother\n\t\t\t\t\t\theading.limit(.1);\n\t\t\t\t\t}\n\n\t\t\t\t\tparticle.velocity.add(heading);\n\t\t\t\t};\n\t\t\t},\n\t\t\talignment: function (range) {\n\t\t\t\trange = Math.pow(range || 100, 2);\n\t\t\t\treturn function (particle) {\n\n\t\t\t\t\tvar i = 0;\n\t\t\t\t\tvar l = particles.length;\n\t\t\t\t\tvar count = 0;\n\t\t\t\t\tvar heading = new Vector$1();\n\n\t\t\t\t\tif (l <= 1) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (; i < l; i++) {\n\n\t\t\t\t\t\t// don't use self in group also don't align when out of range\n\t\t\t\t\t\tif (particles[i] === particle || Vector$1.distanceSquared(particles[i].position, particle.position) > range) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\theading.add(particles[i].velocity);\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (count > 0) {\n\n\t\t\t\t\t\theading.divide(count);\n\t\t\t\t\t\theading.normalize();\n\t\t\t\t\t\theading.multiply(particle.velocity.magnitude);\n\n\t\t\t\t\t\t// limit\n\t\t\t\t\t\theading.multiply(.1);\n\t\t\t\t\t}\n\n\t\t\t\t\tparticle.velocity.add(heading);\n\t\t\t\t};\n\t\t\t},\n\t\t\tmove: function () {\n\t\t\t\treturn function (particle) {\n\t\t\t\t\tparticle.position.add(particle.velocity);\n\n\t\t\t\t\t// handle collisions?\n\t\t\t\t};\n\t\t\t},\n\t\t\teat: function (food) {\n\t\t\t\tfood = food || [];\n\t\t\t\treturn function (particle) {\n\n\t\t\t\t\tvar i = 0;\n\t\t\t\t\tvar l = particles.length;\n\t\t\t\t\tvar prey;\n\n\t\t\t\t\tfor (; i < l; i++) {\n\n\t\t\t\t\t\tprey = particles[i];\n\n\t\t\t\t\t\t// can't eat itself, also, needs to be tasty\n\t\t\t\t\t\tif (prey === particle || food.indexOf(prey.group) === -1) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// calculate force vector\n\t\t\t\t\t\tif (Vector$1.distanceSquared(particle.position, neighbour.position) < 2 && particle.size >= neighbour.size) {\n\t\t\t\t\t\t\tparticle.size += neighbour.size;\n\t\t\t\t\t\t\tdestroy(neighbour);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t\tforce: function (x, y) {\n\t\t\t\treturn function (particle) {\n\t\t\t\t\tparticle.velocity.x += x;\n\t\t\t\t\tparticle.velocity.y += y;\n\t\t\t\t};\n\t\t\t},\n\t\t\tlimit: function (treshold) {\n\t\t\t\treturn function (particle) {\n\t\t\t\t\tparticle.velocity.limit(treshold);\n\t\t\t\t};\n\t\t\t},\n\t\t\tattract: function (forceMultiplier, groups) {\n\t\t\t\tforceMultiplier = forceMultiplier || 1;\n\t\t\t\tgroups = groups || [];\n\t\t\t\treturn function (particle) {\n\n\t\t\t\t\t// attract other particles\n\t\t\t\t\tvar totalForce = new Vector$1(0, 0);\n\t\t\t\t\tvar force = new Vector$1(0, 0);\n\t\t\t\t\tvar i = 0;\n\t\t\t\t\tvar l = particles.length;\n\t\t\t\t\tvar distance;\n\t\t\t\t\tvar attractor;\n\t\t\t\t\tvar grouping = groups.length;\n\n\t\t\t\t\tfor (; i < l; i++) {\n\n\t\t\t\t\t\tattractor = particles[i];\n\n\t\t\t\t\t\t// can't be attracted by itself or mismatched groups\n\t\t\t\t\t\tif (attractor === particle || grouping && groups.indexOf(attractor.group) === -1) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// calculate force vector\n\t\t\t\t\t\tforce.x = attractor.position.x - particle.position.x;\n\t\t\t\t\t\tforce.y = attractor.position.y - particle.position.y;\n\t\t\t\t\t\tdistance = force.magnitude;\n\t\t\t\t\t\tforce.normalize();\n\n\t\t\t\t\t\t// the bigger the attractor the more force\n\t\t\t\t\t\tforce.multiply(attractor.size / distance);\n\n\t\t\t\t\t\ttotalForce.add(force);\n\t\t\t\t\t}\n\n\t\t\t\t\ttotalForce.multiply(forceMultiplier);\n\n\t\t\t\t\tparticle.velocity.add(totalForce);\n\t\t\t\t};\n\t\t\t},\n\t\t\twrap: function (margin) {\n\t\t\t\treturn function (particle) {\n\n\t\t\t\t\t// move around when particle reaches edge of screen\n\t\t\t\t\tvar position = particle.position;\n\t\t\t\t\tvar radius = particle.size * .5;\n\n\t\t\t\t\tif (position.x + radius > canvas.width + margin) {\n\t\t\t\t\t\tposition.x = radius;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.y + radius > canvas.height + margin) {\n\t\t\t\t\t\tposition.y = radius;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.x - radius < -margin) {\n\t\t\t\t\t\tposition.x = canvas.width - radius;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.y - radius < -margin) {\n\t\t\t\t\t\tposition.y = canvas.height - radius;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t\treflect: function () {\n\n\t\t\t\treturn function (particle) {\n\n\t\t\t\t\t// bounce from edges\n\t\t\t\t\tvar position = particle.position;\n\t\t\t\t\tvar velocity = particle.velocity;\n\t\t\t\t\tvar radius = particle.size * .5;\n\n\t\t\t\t\tif (position.x + radius > canvas.width) {\n\t\t\t\t\t\tvelocity.x = -velocity.x;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.y + radius > canvas.height) {\n\t\t\t\t\t\tvelocity.y = -velocity.y;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.x - radius < 0) {\n\t\t\t\t\t\tvelocity.x = -velocity.x;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.y - radius < 0) {\n\t\t\t\t\t\tvelocity.y = -velocity.y;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t\tedge: function (action) {\n\t\t\t\treturn function (particle) {\n\n\t\t\t\t\tvar position = particle.position;\n\t\t\t\t\tvar velocity = particle.velocity;\n\t\t\t\t\tvar radius = particle.size * .5;\n\n\t\t\t\t\tif (position.x + radius > canvas.width) {\n\t\t\t\t\t\taction(particle);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.y + radius > canvas.height) {\n\t\t\t\t\t\taction(particle);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.x - radius < 0) {\n\t\t\t\t\t\taction(particle);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (position.y - radius < 0) {\n\t\t\t\t\t\taction(particle);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tObject.defineProperties(input, {\n\t\t\t'particles': {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn particles;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'width': {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn canvas.width;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'height': {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn canvas.height;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'context': {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn context;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// 初始化\n\t\t_this.init.call(input);\n\n\t\ttick();\n\n\t\t// 监听keyup事件\n\t\tinput.addEventListener('keyup', function (e) {\n\t\t\t_this.action.call(_this, e.pageX, e.pageY);\n\t\t});\n\t}\n}\n\nfunction inputShine(id, opt) {\n\n\tvar el = document.getElementById(id);\n\tvar input = el; // 目标dom\n\tinput.setAttribute(\"shine\", \"shine\");\n\n\tvar opt = opt || {};\n\n\tvar field = {}; // 显示范围\n\n\tvar caret = document.createElement('span');\n\tcaret.style.cssText = document.defaultView.getComputedStyle(input, '').cssText;\n\tcaret.style.position = 'absolute';\n\tcaret.style.left = 0;\n\tcaret.style.top = 0;\n\tcaret.style.width = 'auto';\n\tcaret.style.visibility = 'hidden';\n\tdocument.body.appendChild(caret);\n\n\tfunction reposition() {\n\t\tfield = input.getBoundingClientRect();\n\t}\n\twindow.onload = reposition;\n\twindow.onresize = reposition;\n\treposition();\n\n\tinput.onfocus = function () {\n\t};\n\tinput.onblur = function () {\n\t};\n\n\t// start particle simulation\n\tnew simulate(input, caret, field, opt);\n}\n\n// 检验是否浏览器环境\ntry {\n} catch (ex) {\n    throw new Error('请在浏览器环境下运行');\n}\n\nreturn inputShine;\n\n})));\n"]}